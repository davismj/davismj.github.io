<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0'>

    <title>Using Sass with Aurelia â€“ Matthew James Davis</title>

    <meta name="author" content="Matthew James Davis" />
    <meta name="description" content="How to Sass-enable your Aurelia build process." />
    <meta name="keywords" content="aurelia,build,sass,scss,less,css" />

    <!--[if lt IE 9]>
      <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <link href='https://fonts.googleapis.com/css?family=Raleway:500,600' rel='stylesheet' type='text/css'>
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="stylesheet" type="text/css" href="/desktop.css" media="screen and (min-width: 641px) and (min-height: 641px)" />
    <link rel="stylesheet" type="text/css" href="/mobile.css" media="screen and (max-width: 640px), screen and (max-height: 640px)" />
    <link rel="alternate" type="application/rss+xml" title="Matthew James Davis" href="/feed.xml" />
  </head>

  <body>
    <nav>
      <div>
        <a href="/"><img class="avatar" src="/images/me.jpg" />
        <h1 class="text-center">Matthew James Davis</h1></a>
        <p class="hide-mobile">Aurelia core team member Matthew James Davis is out to educate the community.</p>
        <ul>
          <a href="/blog/"><li class="active">Blog</li></a>
          <a href="/portfolio/"><li class="">Portfolio</li></a>
          <a href="/contact/"><li class="">Contact Me</li></a>
        </ul>
      </div>
    </nav>
    
    <main>
      <article>
	<header>
		Using Sass with Aurelia
		<time>20 Apr 2015</time>
	</header>
	<p>Sass is a common and powerful css preprocessor that helps keep styles and views clean and readable. The Aurelia skeleton navigation project doesn&#39;t come with Sass support out of the box. Fortunately, adding Sass support to the Aurelia development workflow is quick and easy. Let&#39;s take a look at the high level steps we will need to go through:</p>

<ol>
<li>Install the Sass compiler</li>
<li>Add Sass to our project</li>
<li>Configure our paths</li>
<li>Add the build task</li>
</ol>

<h1>Installing the Sass Compiler</h1>

<p>Since the skeleton navigation project comes with a pretty elaborate gulpfile, we install gulp-sass, a sass compiler that hooks into gulp. Let&#39;s add the package to our <code>package.json</code> and run <code>npm install</code> to install the package.</p>

<h4>package.json</h4>
<div class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span>
  <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;aurelia-skeleton-navigation&quot;</span><span class="p">,</span>
  <span class="nt">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;0.12.0&quot;</span><span class="p">,</span>
  <span class="err">...</span>
  <span class="nt">&quot;devDependencies&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="err">...</span>
    <span class="nt">&quot;gulp-sass&quot;</span><span class="p">:</span> <span class="s2">&quot;^1.3.3&quot;</span><span class="p">,</span>
    <span class="err">...</span>
  <span class="p">}</span>
  <span class="err">...</span>
<span class="p">}</span>
</code></pre></div>
<h1>Adding Sass to our Project</h1>

<p>The skeleton navigation project comes equipped with a css file at <code>styles/styles.css</code>. Let&#39;s rename this file to <code>styles.sass</code> and update the syntax to match sass syntax.</p>

<h4>styles.sass</h4>
<div class="highlight"><pre><code class="language-sass" data-lang="sass"><span class="nt">body</span>
    <span class="na">margin</span><span class="o">:</span> <span class="mi">0</span>

<span class="nc">.splash</span>
    <span class="na">text-align</span><span class="o">:</span> <span class="no">center</span>
    <span class="na">margin</span><span class="o">:</span> <span class="mi">10</span><span class="kt">%</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span>
    <span class="na">box-sizing</span><span class="o">:</span> <span class="no">border</span><span class="o">-</span><span class="n">box</span>

    <span class="nc">.message</span>
        <span class="na">font-size</span><span class="o">:</span> <span class="mi">72</span><span class="kt">px</span>
        <span class="na">line-height</span><span class="o">:</span> <span class="mi">72</span><span class="kt">px</span>
        <span class="na">text-shadow</span><span class="o">:</span> <span class="nf">rgba</span><span class="p">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="mf">.5</span><span class="p">)</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">15</span><span class="kt">px</span>
        <span class="na">text-transform</span><span class="o">:</span> <span class="no">uppercase</span>
        <span class="na">font-family</span><span class="o">:</span> <span class="s2">&quot;Helvetica Neue&quot;</span><span class="o">,</span> <span class="n">Helvetica</span><span class="o">,</span> <span class="n">Arial</span><span class="o">,</span> <span class="no">sans-serif</span>

    <span class="nc">.fa-spinner</span>
        <span class="na">text-align</span><span class="o">:</span> <span class="no">center</span>
        <span class="na">display</span><span class="o">:</span> <span class="no">inline</span><span class="o">-</span><span class="no">block</span>
        <span class="na">font-size</span><span class="o">:</span> <span class="mi">72</span><span class="kt">px</span>
        <span class="na">margin-top</span><span class="o">:</span> <span class="mi">50</span><span class="kt">px</span>

<span class="nc">.page-host</span>
    <span class="na">position</span><span class="o">:</span> <span class="no">absolute</span>
    <span class="na">left</span><span class="o">:</span> <span class="mi">0</span>
    <span class="na">right</span><span class="o">:</span> <span class="mi">0</span>
    <span class="na">top</span><span class="o">:</span> <span class="mi">50</span><span class="kt">px</span>
    <span class="na">bottom</span><span class="o">:</span> <span class="mi">0</span>
    <span class="na">overflow-x</span><span class="o">:</span> <span class="no">hidden</span>
    <span class="na">overflow-y</span><span class="o">:</span> <span class="no">auto</span>

<span class="nt">section</span>
    <span class="na">margin</span><span class="o">:</span> <span class="mi">0</span> <span class="mi">20</span><span class="kt">px</span>

<span class="nc">.navbar-nav</span> <span class="nt">li</span><span class="nc">.loader</span>
    <span class="na">margin</span><span class="o">:</span> <span class="mi">12</span><span class="kt">px</span> <span class="mi">24</span><span class="kt">px</span> <span class="mi">0</span> <span class="mi">6</span><span class="kt">px</span>

<span class="nc">.pictureDetail</span>
    <span class="na">max-width</span><span class="o">:</span> <span class="mi">425</span><span class="kt">px</span>
</code></pre></div>
<h1>Configuring our paths</h1>

<p>Now, since the end goal is to compile the <code>.sass</code> file and output it as <code>.css</code>, we need to tell gulp where to find the <code>.sass</code> file and we need to instruct our <code>index.html</code> to read the new <code>.css</code>. The skeleton navigation project is already configured to output all compiled files to the <code>/dist</code> folder and we&#39;re going to continue using that convention. We can instruct gulp where to find the new <code>.sass</code> file by modifying the <code>build/paths.js</code> file.</p>

<h4>build/paths.js</h4>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="p">...</span>
  <span class="nx">style</span><span class="o">:</span> <span class="s1">&#39;styles/**/*.sass&#39;</span><span class="p">,</span>
  <span class="nx">output</span><span class="o">:</span> <span class="s1">&#39;dist/&#39;</span><span class="p">,</span>
  <span class="p">...</span>
<span class="p">};</span>
</code></pre></div>
<h4>index.html</h4>
<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;head&gt;</span>
    ...
    <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">type=</span><span class="s">&quot;text/css&quot;</span> <span class="na">href=</span><span class="s">&quot;dist/styles.css&quot;</span><span class="nt">&gt;</span>
    ...
  <span class="nt">&lt;/head&gt;</span>
  <span class="nt">&lt;body</span> <span class="na">aurelia-app</span><span class="nt">&gt;</span>
    ...
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div>
<h1>Adding the build task</h1>

<p>Finally, we add a new <code>build-css</code> task to gulp. Since the task builds css, we will include it with our other build tasks in the <code>build/tasks/build.js</code> file. We will also make sure that the watch task in the <code>build/tasks.watch.js</code> knows about our new <code>build-css</code> task.</p>

<h4>build/tasks/build.js</h4>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="p">...</span>

<span class="c1">// First, we need to import gulp-sass which we installed in step 1.</span>
<span class="kd">var</span> <span class="nx">sass</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;gulp-sass&#39;</span><span class="p">);</span>

<span class="p">...</span>

<span class="c1">// Next, we add a new task for building css.</span>
<span class="nx">gulp</span><span class="p">.</span><span class="nx">task</span><span class="p">(</span><span class="s1">&#39;build-css&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

  <span class="c1">// We instruct gulp to pull the source from the path we specified in step 3.</span>
  <span class="k">return</span> <span class="nx">gulp</span><span class="p">.</span><span class="nx">src</span><span class="p">(</span><span class="nx">paths</span><span class="p">.</span><span class="nx">style</span><span class="p">)</span>

    <span class="c1">// The plumber step will ensure that if we write syntactically invalid </span>
    <span class="c1">// sass, even though the step won&#39;t run, the gulp task won&#39;t exit. This</span>
    <span class="c1">// is helpful because it allows us to fix our syntax without having to </span>
    <span class="c1">// restart the gulp watch task.</span>
    <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">plumber</span><span class="p">())</span>

    <span class="c1">// The changed step will analyze which files have changed and require</span>
    <span class="c1">// rebuilding.</span>
    <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">changed</span><span class="p">(</span><span class="nx">paths</span><span class="p">.</span><span class="nx">output</span><span class="p">,</span> <span class="p">{</span><span class="nx">extension</span><span class="o">:</span> <span class="s1">&#39;.css&#39;</span><span class="p">}))</span>

    <span class="c1">// The sourcemaps step will automatically generate sourcemaps.</span>
    <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">sourcemaps</span><span class="p">.</span><span class="nx">init</span><span class="p">())</span>

    <span class="c1">// The sass step will compile the sass. We need to specify that we are</span>
    <span class="c1">// using the indented syntax. This is not necessary when using scss.</span>
    <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">sass</span><span class="p">({</span><span class="nx">indentedSyntax</span><span class="o">:</span> <span class="kc">true</span><span class="p">}))</span>

    <span class="c1">// And our last steps write the output and sourcemaps to the build</span>
    <span class="c1">// destination. Recall from step 3 that this is dist/.</span>
    <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">sourcemaps</span><span class="p">.</span><span class="nx">write</span><span class="p">())</span>
    <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">gulp</span><span class="p">.</span><span class="nx">dest</span><span class="p">(</span><span class="nx">paths</span><span class="p">.</span><span class="nx">output</span><span class="p">));</span>
<span class="p">});</span>

<span class="nx">gulp</span><span class="p">.</span><span class="nx">task</span><span class="p">(</span><span class="s1">&#39;build&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">runSequence</span><span class="p">(</span>
    <span class="s1">&#39;clean&#39;</span><span class="p">,</span>

    <span class="c1">// Finally, we append our new build-css task to the general build task.</span>
    <span class="c1">// This will link build-css into the general build task which is used</span>
    <span class="c1">// in the gulp watch task.</span>
    <span class="p">[</span><span class="s1">&#39;build-system&#39;</span><span class="p">,</span> <span class="s1">&#39;build-html&#39;</span><span class="p">,</span> <span class="s1">&#39;build-css&#39;</span><span class="p">],</span>
    <span class="nx">callback</span>
  <span class="p">);</span>
<span class="p">});</span>
</code></pre></div>
<h4>build/tasks/watch.js</h4>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">gulp</span><span class="p">.</span><span class="nx">task</span><span class="p">(</span><span class="s1">&#39;watch&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;serve&#39;</span><span class="p">],</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="p">...</span>
  <span class="nx">gulp</span><span class="p">.</span><span class="nx">watch</span><span class="p">(</span><span class="nx">paths</span><span class="p">.</span><span class="nx">style</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;build-css&#39;</span><span class="p">,</span> <span class="nx">browserSync</span><span class="p">.</span><span class="nx">reload</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;change&#39;</span><span class="p">,</span> <span class="nx">reportChange</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>
<h1>Notes</h1>

<p>This general process should work for other css preprocessors, including scss and less. In fact, the gulp-sass library will also compile <code>.scss</code> files. Make sure that you update your extensions in all of the steps above from <code>.sass</code> to your source of choice. Additionally, if you are using scss, you do not need the <code>{indentedSyntax: true}</code> argument, and can simply write <code>.pipe(sass())</code>.</p>

<h1>Links</h1>

<p><a href="https://github.com/davismj/skeleton-navigation-sass">Full source on GitHub</a><br />
<a href="http://sass-lang.com/">Sass Website</a><br />
<a href="http://lesscss.org/">Less Website</a></p>

</article>
<!-- 
<footer>
	
<div class="comments">
	<div id="disqus_thread"></div>
	<script type="text/javascript">
    
	    var disqus_shortname = 'foursails'; 

	    (function() {
	        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
	        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
	        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	    })();

	</script>
	<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>

</footer> -->
    </main>
    
    
	<!-- Google Analytics -->
	<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
		
		ga('create', 'UA-58706961-2', 'auto');
		ga('send', 'pageview');
	</script>
	<!-- End Google Analytics -->

  </body>
</html>
